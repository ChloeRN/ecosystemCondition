[{"path":"index.html","id":"introduction","chapter":"Introduction","heading":"Introduction","text":"site may view nitty gritty details certain indicators ecosystem condition Norway calculated.web page made document work related R&D project develop indicators ecosystem condition three main ecosystems Norway: wetlands, open areas forest line, semi-natural land. indicators yet used real assessments, may represent unfinished work pending future data availability. addition, may chose also present analyses documenting indicators used existing assessments ecosystem condition.","code":""},{"path":"index.html","id":"community-review","chapter":"Introduction","heading":"Community review","text":"want work transparent credible. Therefor encourage types feedback analyses indicators ecological condition can read web site. submit comments, please github repository open new issue answer .","code":""},{"path":"index.html","id":"author-guidelines","chapter":"Introduction","heading":"Author guidelines","text":"participating indicator project, detailed information document work communicated email, main steps can summarised :Obtain go ahead signal coordination group make sure free start workRead template.Rmd file. Make copy store , (root) folder DRAFT_myIndicator.Rmd. (example, see DRAFT_breareal.Rmd). Finish documentation analyses .\ncan load data internal NINA servers, web hosts, store smaller data set data.\ndata folder also contains supporting data sets may want use, delineation five regions used ecosystem assessment (data/regions.shp), outline Norway (outlineOfNorway_EPSG25833.shp).\npreview rmarkdown file html, type rmarkdown::render(\"DRAFT_myIndicator.Rmd\") console (knitr shortcuts don’t work expected inside bookdown projects).\nfilling template.Rmd file work, try change headers much.\nFinal result analyses written indicators folder. preferred output georeferenced data (rasters shape files), andthese placed indators/indicatorMaps. georeference data use EPSG:25833 - ETRS89 / UTM zone 33N. output, like data tables, can stired indicators.\ncan load data internal NINA servers, web hosts, store smaller data set data.\ndata folder also contains supporting data sets may want use, delineation five regions used ecosystem assessment (data/regions.shp), outline Norway (outlineOfNorway_EPSG25833.shp).preview rmarkdown file html, type rmarkdown::render(\"DRAFT_myIndicator.Rmd\") console (knitr shortcuts don’t work expected inside bookdown projects).filling template.Rmd file work, try change headers much.Final result analyses written indicators folder. preferred output georeferenced data (rasters shape files), andthese placed indators/indicatorMaps. georeference data use EPSG:25833 - ETRS89 / UTM zone 33N. output, like data tables, can stired indicators.Make pull request main GitHub repository submit file.Anders someone else project wil conduct rapid code review, making sure code reproducible, interpretable renders locally R Studio server.approved, reviewer make copy DRAFT_ file, removing DRAFT_ part name, well YML header, well updating rmd_files part _bookdown.yml. (example file, see breareal.Rmd.)update web site (web site), admin user needs pull repo R Studio server, compile book (Ctr+Shift+B), commit push main. html version book docs folder.","code":""},{"path":"community-review-1.html","id":"community-review-1","chapter":"Community review","heading":"Community review","text":"want work transparent credible. Therefor encourage types feedback analyses indicators ecological condition can read web site. submit comments, please github repository open new issue answer .","code":""},{"path":"overview-of-indicators.html","id":"overview-of-indicators","chapter":"Overview of indicators","heading":"Overview of indicators","text":"","code":""},{"path":"overview-of-indicators.html","id":"areal-av-isbreer-glacier-area","chapter":"Overview of indicators","heading":"Areal av isbreer / Glacier area","text":"indicator reflects relative loss glacial area tha last climatic normal persion today.\nTable 0.1: Fakatark tilstandindikatoren Areal av isbreer\n","code":""},{"path":"overview-of-indicators.html","id":"indicator-x","chapter":"Overview of indicators","heading":"Indicator X","text":"indicator …","code":""},{"path":"areal-av-isbreer.html","id":"areal-av-isbreer","chapter":"1 Areal av isbreer","heading":"1 Areal av isbreer","text":"Author date:\nAnders Kolstad","code":"#> [1] \"2022-08-08\""},{"path":"areal-av-isbreer.html","id":"introduction-1","chapter":"1 Areal av isbreer","heading":"1.1 Introduction","text":"indicator describes relative change glacial extent fire regions Norway. slightly different indicator used alpine assessment.","code":""},{"path":"areal-av-isbreer.html","id":"about-the-underlying-data","chapter":"1 Areal av isbreer","heading":"1.2 About the underlying data","text":"indicator uses maps glacier extent ( breatlas ) 2018-2019 compares similar map 1947-1985. maps owned NVE (Norsk vassdrags og energidirektorat). new map based Sentinel images, old map digitised version N50 maps, additional areal photo interpretation top.","code":""},{"path":"areal-av-isbreer.html","id":"representativity-in-time-and-space","chapter":"1 Areal av isbreer","heading":"1.2.1 Representativity in time and space","text":"data set (map) covers entire Norwegian mainland. two time steps, expect changes glacial extent relatively linear consistent time.\nolder map may underestimated glacial extent due better chance smaller snow ice patches captured Sentinel contra aerial photo interpretations.","code":""},{"path":"areal-av-isbreer.html","id":"original-units","chapter":"1 Areal av isbreer","heading":"1.2.2 Original units","text":"Area units (e.g. km2)","code":""},{"path":"areal-av-isbreer.html","id":"temporal-coverage","chapter":"1 Areal av isbreer","heading":"1.2.3 Temporal coverage","text":"1947-2019","code":""},{"path":"areal-av-isbreer.html","id":"aditional-comments-about-the-dataset","chapter":"1 Areal av isbreer","heading":"1.2.4 Aditional comments about the dataset","text":"None","code":""},{"path":"areal-av-isbreer.html","id":"ecosystem-characteristic","chapter":"1 Areal av isbreer","heading":"1.3 Ecosystem characteristic","text":"","code":""},{"path":"areal-av-isbreer.html","id":"norwegian-standard","chapter":"1 Areal av isbreer","heading":"1.3.1 Norwegian standard","text":"indicator initially assigned Abiotiske forhold characteristic, now considered Landskapsøkologiske mønstre. initial justificaton glacial melting influence water availability downstream. Now put weight glaciers just resevoirs ice water, habitat, presence abundance specific habitat can though aspect landscape state.","code":""},{"path":"areal-av-isbreer.html","id":"seea-ect","chapter":"1 Areal av isbreer","heading":"1.3.2 SEEA ECT","text":"indicator similarly assiged SEEA ECT class C1 Landscape characteristics.","code":""},{"path":"areal-av-isbreer.html","id":"collinearities-with-other-indicators","chapter":"1 Areal av isbreer","heading":"1.4 Collinearities with other indicators","text":"None known.","code":""},{"path":"areal-av-isbreer.html","id":"reference-state-and-values","chapter":"1 Areal av isbreer","heading":"1.5 Reference state and values","text":"","code":""},{"path":"areal-av-isbreer.html","id":"reference-state","chapter":"1 Areal av isbreer","heading":"1.5.1 Reference state","text":"indicator uses reference state indicators developed similar projects, defined Nybø et al (2017): Fagsystem fastsetting av god økologisk tilstand. glacial extent primarily, solely, dependent climate, case actual data climatic reference period previous normal period 1961-1990.","code":""},{"path":"areal-av-isbreer.html","id":"reference-values-thresholds-for-defining-good-ecological-condition-minimum-andor-maximum-values","chapter":"1 Areal av isbreer","heading":"1.5.2 Reference values, thresholds for defining good ecological condition, minimum and/or maximum values","text":"reference value zero change glacial extent time. threshold defining good ecological condition set 40% reduction glacial extent, default solution. normalization follows linear model, although sigmoidal weibull function might appropriate.minimum value set zero.","code":""},{"path":"areal-av-isbreer.html","id":"uncertainties","chapter":"1 Areal av isbreer","heading":"1.6 Uncertainties","text":"add 3% error side estimates, reported glacier maps NVE.","code":""},{"path":"areal-av-isbreer.html","id":"references","chapter":"1 Areal av isbreer","heading":"1.7 References","text":"Andreassen, L.M., & Winsvold, S.H. (eds.). 2012. Inventory Norwegian glaciers. NVE Rapport 38, Norges Vassdrags- og energidirektorat, 236 sAndreassen, L.M., & Winsvold, S.H. (eds.). 2012. Inventory Norwegian glaciers. NVE Rapport 38, Norges Vassdrags- og energidirektorat, 236 sAndreassen, L.M., Elvehøy, H., Kjøllmoen, B. & Belart, J.M.C. 2020. Glacier change Norway since 1960s – overview mass balance, area, length surface elevation changes. Journal Glaciology 66: 313–328Andreassen, L.M., Elvehøy, H., Kjøllmoen, B. & Belart, J.M.C. 2020. Glacier change Norway since 1960s – overview mass balance, area, length surface elevation changes. Journal Glaciology 66: 313–328Andreassen, L.M., Nagy, T., Kjøllmoen, B. & Leigh, J.R. 2022. Sentinel-2 based inventory Norway’s glaciers ice-marginal lakes 2018/2019. Journal Glaciology (review)Andreassen, L.M., Nagy, T., Kjøllmoen, B. & Leigh, J.R. 2022. Sentinel-2 based inventory Norway’s glaciers ice-marginal lakes 2018/2019. Journal Glaciology (review)Winsvold, S.H., Andreassen, L.M. & Kienholz, C.. 2014. Glacier area length changes Norway repeat inventories. Cryosphere 8: 1885-1903Winsvold, S.H., Andreassen, L.M. & Kienholz, C.. 2014. Glacier area length changes Norway repeat inventories. Cryosphere 8: 1885-1903","code":""},{"path":"areal-av-isbreer.html","id":"analyses","chapter":"1 Areal av isbreer","heading":"1.8 Analyses","text":"","code":""},{"path":"areal-av-isbreer.html","id":"importing-the-data-sets","chapter":"1 Areal av isbreer","heading":"1.8.1 Importing the data sets","text":"four data sets:glacial atlasn50 (old glacial atlas)regional delineation Norway (fire regions)outline mainland NorwayWe assuming glaciers found mountins, se need mask glacial atlas data using ecosystem delineation map.","code":""},{"path":"areal-av-isbreer.html","id":"glacial-atlas","chapter":"1 Areal av isbreer","heading":"1.8.1.1 Glacial atlas","text":"new glacial atlas 2018 2019 based Sentinell (ref. Liss Marie Andreassen, NVE)maps made project need CRS: EPSG:25833 - ETRS89 / UTM zone 33N.\none UTM 33N ETRS89, even defined old Proj.4 way.6915 polygons. Let’s calculate area polygons study distribution size classes.polygons small, couple big ones. largest polygon 50 km2, note polygons somewhat arbitrarily split.","code":"\n\n# server path\nbreatlas_path <- '/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/breatlas_2018_2019/Breatlas_20182019_temp20210922_lma.shp'\n\n# local path \n#breatlas_path <- 'P:/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/breatlas_2018_2019/Breatlas_20182019_temp20210922_lma.shp'\n\n\nbreatlas <- sf::st_read(breatlas_path)\n#> Reading layer `Breatlas_20182019_temp20210922_lma' from data source `/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/breatlas_2018_2019/Breatlas_20182019_temp20210922_lma.shp' \n#>   using driver `ESRI Shapefile'\n#> Simple feature collection with 6915 features and 27 fields (with 4 geometries empty)\n#> Geometry type: MULTIPOLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -9874.591 ymin: 6624398 xmax: 810132 ymax: 7836994\n#> Projected CRS: ETRS89 / UTM zone 33N\nbreatlas$area <- st_area(breatlas)\npar(mfrow=c(1,2))\nhist(breatlas$area)\nplot(breatlas$area)"},{"path":"areal-av-isbreer.html","id":"map-of-norway","chapter":"1 Areal av isbreer","heading":"1.8.1.2 Map of Norway","text":"map stored GitHub repository indicators/data/.","code":"\nnor <- sf::read_sf(\"data/outlineOfNorway_EPSG25833.shp\")\n\nplot(nor$geometry, axes=T, main = \"Breatlas 2018-2019\")\n  plot(breatlas$geometry, add=T, border = \"blue\")"},{"path":"areal-av-isbreer.html","id":"n50","chapter":"1 Areal av isbreer","heading":"1.8.1.3 N50","text":"old glacial extent map. Import transform , .Let’s now plot top .red areas map far right ice retreated selected glacier west coast.\nNow need devide map regions compare area n50 new glacial extent map breatlas.","code":"\n\n# server path\nn50_path <- '/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/n50/cryoclim_GAO_NO_1952_1985_UTM_33N.shp'\n\n# local path\n#n50_path <- 'P:/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/n50/cryoclim_GAO_NO_1952_1985_UTM_33N.shp'\n\nn50 <- sf::st_read(n50_path)%>%\n  st_transform(crs = crs(breatlas))\n#> Reading layer `cryoclim_GAO_NO_1952_1985_UTM_33N' from data source `/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/n50/cryoclim_GAO_NO_1952_1985_UTM_33N.shp' \n#>   using driver `ESRI Shapefile'\n#> Simple feature collection with 7141 features and 30 fields\n#> Geometry type: POLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -7278.562 ymin: 6623024 xmax: 812207.8 ymax: 7841654\n#> Projected CRS: WGS 84 / UTM zone 33N\nplot(nor$geometry, axes=T, main = \"n50 - 1952-1985\")\n  plot(n50$geometry, add=T, border = \"red\")\n\n# define some boundary boxes for zooming in on specific regions\nmyExt <- raster::extent(c(0, 100000, 6840000, 6900000))\nmyExt2 <- raster::extent(c(5000, 10000, 6880000, 6885000))\n\n# Prepare plotting device with one row, three columns\npar(mfrow=c(1,3))\n\n# Create three maps, each zooming in a bit further.\nplot(nor$geometry, axes=T)\n    plot(n50$geometry,  border = \"orange\", col = scales::alpha(\"orange\", 1), add=T)\n    plot(myExt, add=T, lwd=2)\n\nplot(nor$geometry, xlim=c(0, 100000),\n          ylim=c(6840000, 6900000),\n          axes=T)\n    plot(n50$geometry, add=T, col = \"grey\")\n    plot(myExt2, add=T, lwd=3, col=\"orange\")\n\n# for this last map I plot the old extent in red and the new as grey on top. The red areas still visible will be areas where the glaciers have retreated.        \nplot(nor$geometry, xlim=c(5000, 10000),\n          ylim=c(6880000, 6885000),\n     axes=T)\n    plot(n50$geometry, add=T, col = \"red\")\n    plot(breatlas$geometry, add=T, col = \"grey\")"},{"path":"areal-av-isbreer.html","id":"regions","chapter":"1 Areal av isbreer","heading":"1.8.1.4 Regions","text":"Importing shape file regional delineation.Let’s plot make sure correct.Get region namesThese odd. Let fix Norwegian letters manually.going need fix problem glacier polygons crossing .68 polygons valid.\nLet’s look first four reasons .convinient function fix .Let plot new, fixed map top old see match. give new valid map blue transparent colour, old map yellow transparent colour.seems worked.\nNotice also larger polygons somewhat arbitrarely divided several adjoining polygons. new map, old n50 map.Delete invalid data set.","code":"\nreg <- st_read(\"data/regions.shp\")\n#> Reading layer `regions' from data source \n#>   `/data/Egenutvikling/41001581_egenutvikling_anders_kolstad/github/ecosystemCondition/data/regions.shp' \n#>   using driver `ESRI Shapefile'\n#> Simple feature collection with 5 features and 2 fields\n#> Geometry type: POLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -99551.21 ymin: 6426048 xmax: 1121941 ymax: 7962744\n#> Projected CRS: ETRS89 / UTM zone 33N\nst_crs(reg)\n#> Coordinate Reference System:\n#>   User input: ETRS89 / UTM zone 33N \n#>   wkt:\n#> PROJCRS[\"ETRS89 / UTM zone 33N\",\n#>     BASEGEOGCRS[\"ETRS89\",\n#>         DATUM[\"European Terrestrial Reference System 1989\",\n#>             ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n#>                 LENGTHUNIT[\"metre\",1]]],\n#>         PRIMEM[\"Greenwich\",0,\n#>             ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>         ID[\"EPSG\",4258]],\n#>     CONVERSION[\"UTM zone 33N\",\n#>         METHOD[\"Transverse Mercator\",\n#>             ID[\"EPSG\",9807]],\n#>         PARAMETER[\"Latitude of natural origin\",0,\n#>             ANGLEUNIT[\"degree\",0.0174532925199433],\n#>             ID[\"EPSG\",8801]],\n#>         PARAMETER[\"Longitude of natural origin\",15,\n#>             ANGLEUNIT[\"degree\",0.0174532925199433],\n#>             ID[\"EPSG\",8802]],\n#>         PARAMETER[\"Scale factor at natural origin\",0.9996,\n#>             SCALEUNIT[\"unity\",1],\n#>             ID[\"EPSG\",8805]],\n#>         PARAMETER[\"False easting\",500000,\n#>             LENGTHUNIT[\"metre\",1],\n#>             ID[\"EPSG\",8806]],\n#>         PARAMETER[\"False northing\",0,\n#>             LENGTHUNIT[\"metre\",1],\n#>             ID[\"EPSG\",8807]]],\n#>     CS[Cartesian,2],\n#>         AXIS[\"(E)\",east,\n#>             ORDER[1],\n#>             LENGTHUNIT[\"metre\",1]],\n#>         AXIS[\"(N)\",north,\n#>             ORDER[2],\n#>             LENGTHUNIT[\"metre\",1]],\n#>     USAGE[\n#>         SCOPE[\"unknown\"],\n#>         AREA[\"Europe - 12°E to 18°E and ETRS89 by country\"],\n#>         BBOX[46.4,12,84.01,18.01]],\n#>     ID[\"EPSG\",25833]]\nplot(nor$geometry, axes=T)\n  plot(reg$geometry, add=T, border = \"black\", \n       col = scales::alpha(c(\"blue\", \n                             \"red\", \n                             \"green\",\n                             \"yellow\",\n                             \"brown\"), .2))\nunique(reg$region)\n#> [1] \"Nord-Norge\"      \"Midt-Norge\"      \"Ã\\u0098stlandet\"\n#> [4] \"Vestlandet\"      \"SÃ¸rlandet\"\nreg$region[reg$region==\"Ã\\u0098stlandet\"] <- \"Østlandet\"\nreg$region[reg$region==\"SÃ¸rlandet\"] <- \"Sørlandet\"\ntable(st_is_valid(breatlas))\n#> \n#> FALSE  TRUE \n#>    68  6847\nunique(st_is_valid(breatlas, reason=T))[1:5]\n#> [1] \"Valid Geometry\"                                       \n#> [2] \"Ring Self-intersection[100236.4931 6912507.5864]\"     \n#> [3] \"Ring Self-intersection[92500.2095999997 6900940.8003]\"\n#> [4] \"Ring Self-intersection[91965.6612 6883260.4912]\"      \n#> [5] \"Ring Self-intersection[120595.9254 6853573.4955]\"\n# requires lwgeom\nbreatlas2 <- st_make_valid(breatlas)\ntable(st_is_valid(breatlas2))\n#> \n#> TRUE \n#> 6915\n\n# same result:\n#breatlas2 <- st_buffer(breatlas, 0.0)\n#table(st_is_valid(breatlas2))\nplot(nor$geometry, xlim=c(5000, 10000),\n          ylim=c(6880000, 6885000),\n     axes=T)\n    plot(breatlas2$geometry, add=T, col = scales::alpha(\"blue\",0.5))\n    plot(breatlas$geometry, add=T, col = scales::alpha(\"yellow\",0.5))\nbreatlas <- breatlas2\nrm(breatlas2)"},{"path":"areal-av-isbreer.html","id":"glacial-area-per-region","chapter":"1 Areal av isbreer","heading":"1.8.2 Glacial area per region","text":"","code":""},{"path":"areal-av-isbreer.html","id":"contemporary-area","chapter":"1 Areal av isbreer","heading":"1.8.2.1 Contemporary area","text":"one method getting glacial area region.Checking happens polygons span regions. Central Norway red western Norway green. 50% transparency means get third colour overlap.worked fine.Calculating area polygonsSouthern Norway <1km2 glaciers 2018-2019.","code":"\n# This intersection operation is a bit heavy, so I do it once and store it locally so that I can import it again quickly. \n#brealtas_reg <- st_intersection(breatlas, reg)\n#saveRDS(brealtas_reg, \"indicators/data/brealtas_reg_helperfile.rds\")\n\n# Importing what I create above\nbrealtas_reg <- readRDS(\"data/brealtas_reg_helperfile.rds\")\nplot(brealtas_reg$geometry[brealtas_reg$region==\"Midt-Norge\"], \n    col = scales::alpha(\"red\",0.5), border=NA, axes=T, \n     ylim=c(6900000, 6905000),\n     xlim=c(85000, 100000))\nplot(brealtas_reg$geometry[brealtas_reg$region==\"Vestlandet\"], \n     col = scales::alpha(\"green\",0.5), border=NA, add=T)\n  plot(nor$geometry, add=T)\n#Calculating the area of the polygons\nbrealtas_reg$area_crop <- st_area(brealtas_reg)\n\n# summing the area for each region\nbretabell <- tapply(\n       brealtas_reg$area_crop,\n       brealtas_reg$region,\n       FUN = sum)\n\n# converting from m2 to km2\nbretabell <- bretabell/1000000\n\n# plotting\nbarplot(\n  bretabell,\n  ylab=\"Breareal (km2)\"\n)"},{"path":"areal-av-isbreer.html","id":"same-for-n50","chapter":"1 Areal av isbreer","heading":"1.8.2.2 Same for N50","text":"Thats good.\nNow plot reference values (n50) contemporary data together.figure , glacial area reference periond light grey todays area dark grey. height light grey bar depicts reduction glacial area.little glaicers southern Norway reference period, 4 km2. condition poor! ’m entirely sure representative. alternative set NA, think - one argue glaciers important central alpine ecosystems south.","code":"\nn50x <- st_make_valid(n50)\n#n50_reg <- st_intersection(n50x, reg)\n#saveRDS(n50_reg, \"indicators/data/n50_helperfile.rds\")\nn50_reg <- readRDS(\"data/n50_helperfile.rds\")\nplot(n50_reg$geometry[n50_reg$region==\"Midt-Norge\"], \n    col = scales::alpha(\"red\",0.5), border=NA, axes=T, \n     ylim=c(6900000, 6905000),\n     xlim=c(85000, 100000))\nplot(n50_reg$geometry[n50_reg$region==\"Vestlandet\"], \n     col = scales::alpha(\"green\",0.5), border=NA, add=T)\n  plot(nor$geometry, add=T)\nn50_reg$area_crop <- st_area(n50_reg)\n\nn50tabell <- tapply(\n       n50_reg$area_crop,\n       n50_reg$region,\n       FUN = sum)\nn50tabell <- n50tabell/1000000 \n\n\nbarplot(\n  n50tabell,\n  ylab=\"Breareal (km2)\",\n  col=\"grey\"\n)\nbarplot(\n  bretabell,\n  ylab=\"Breareal (km2)\",\n  add=T,\n  col=\"grey30\"\n)"},{"path":"areal-av-isbreer.html","id":"scaled-indicator-values","chapter":"1 Areal av isbreer","heading":"1.8.3 Scaled indicator values","text":"Making table indicator values.Scaling clipping regions outline NorwayPlotting static map scaled indicator valuesCalculating total change glacier extentWe’ve lost 30% glacial area time.","code":"\nmyTbl <- tibble(region           = names(bretabell),\n                indikator        = bretabell,\n                referanseverdi   = n50tabell)\nmyTbl$skalert_indikator <- myTbl$indikator/myTbl$referanseverdi\n\nknitr::kable(myTbl)\n# paste the scaled indicato values into the shape file with the regions, using the match function to make sure the align correctly\nreg$skalert_indikator <- myTbl$skalert_indikator[match(reg$region, myTbl$region)]\n\n# cutting away the marine areas\nreg_clipped <- st_intersection(reg, nor)\n#> Warning: attribute variables are assumed to be spatially\n#> constant throughout all geometries\n# round of to 2 decimals\nreg_clipped$skalert_indikator_r <- round(reg_clipped$skalert_indikator, 2)\ntmap_mode(\"plot\") # mode 'view' takes a lot longer to render, but looks better\n#> tmap mode set to plotting\ntm_shape(reg_clipped) + \n  tm_polygons(col=\"skalert_indikator\", \n              border.col = \"white\")+\n  tm_text(\"skalert_indikator_r\", size=1.5)+\n  tm_shape(nor)+\n  tm_polygons(alpha = 0,border.col = \"black\")\n# removing the value for souther norway\nreg_clipped$skalert_indikator[reg_clipped$region==\"Sørlandet\"] <- NA\nsum(bretabell)/sum(n50tabell)\n#> [1] 0.7003536"},{"path":"areal-av-isbreer.html","id":"uncertainty","chapter":"1 Areal av isbreer","heading":"1.8.4 Uncertainty","text":"NVE reports 3% uncertainty method. interpret +- 3% represent 99.9%CI estimate (ca 2 SD).\noriginal indicator re-sampled indicator value 10000 times , 0.015sd, get distribution indicator values. time settle reporting sd single value .","code":""},{"path":"areal-av-isbreer.html","id":"prepare-export","chapter":"1 Areal av isbreer","heading":"1.9 Prepare export","text":"Now can prepare final exported data file. shape file raw scaled indicator values, reference reference values, uncertainties.names columns standardised (region, v_YYYY, sd_YYYY, i_YYYY, reference).","code":"\nnames(reg_clipped)\n#> [1] \"id\"                  \"region\"             \n#> [3] \"skalert_indikator\"   \"GID_0\"              \n#> [5] \"NAME_0\"              \"geometry\"           \n#> [7] \"skalert_indikator_r\"\n# paste the raw variable estimates\nreg_clipped$v_2019 <- myTbl$indikator[match(reg_clipped$region, myTbl$region)]              \n\n# paste the reference values\nreg_clipped$reference <- myTbl$referanseverdi[match(reg_clipped$region, myTbl$region)]      \n\n# add 3% (one-sided) errors (SD=1.5% so that 1.95SD equals about 3%). \nreg_clipped$sd_2019 <- reg_clipped$v_2019*0.015\n        \n# subset the shape file to include only the columns of interest, and rename the column with the scaled indicator values, assigning the value to year 2019.\nexp <- dplyr::select(reg_clipped,\n                     region,\n                     v_2019,\n                     sd_2019,\n                     reference,\n                     i_2019 = skalert_indikator,\n                     geometry)"},{"path":"areal-av-isbreer.html","id":"eksport-shape-file-final-product","chapter":"1 Areal av isbreer","heading":"1.9.1 Eksport shape file (final product)","text":"","code":"\nsf::st_write(exp, \"indicators/indicatorMaps/breareal.shp\")\nknitr::kable(exp[,1:5])"},{"path":"test1.html","id":"test1","chapter":"2 This is an indicator","heading":"2 This is an indicator","text":"","code":"\nplot(rnorm(10,10,10))"}]
